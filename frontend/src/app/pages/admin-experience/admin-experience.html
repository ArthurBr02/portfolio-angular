<div class="admin-page">
    <app-admin-page-header title="Manage Experience" buttonText="Add New Experience" [showForm]="showForm()"
        (buttonClick)="toggleForm()">
    </app-admin-page-header>

    @if (showForm()) {
    <div class="form-card glass-card">
        <h3>Add New Experience</h3>
        <form [formGroup]="experienceForm" (ngSubmit)="onSubmit()">
            <app-form-input label="Company" formControlName="company" [required]="true"
                placeholder="Enter company name">
            </app-form-input>

            <app-form-input label="Position" formControlName="position" [required]="true"
                placeholder="Enter your position">
            </app-form-input>

            <div class="form-row">
                <app-form-input label="Start Date" formControlName="startDate" [required]="true"
                    placeholder="e.g. 2022">
                </app-form-input>

                <app-form-input label="End Date" formControlName="endDate" placeholder="e.g. Present">
                </app-form-input>
            </div>

            <app-form-textarea label="Description" formControlName="description" [required]="true" [rows]="3"
                placeholder="Describe your role and achievements">
            </app-form-textarea>

            <button type="submit" class="btn btn-primary" [disabled]="experienceForm.invalid || isSubmitting()">
                {{ isSubmitting() ? 'Saving...' : 'Save Experience' }}
            </button>
        </form>
    </div>
    }

    <div class="experience-list">
        @for (exp of experiences(); track exp.id) {
        <div class="exp-item glass-card">
            <div class="exp-info">
                <h4>{{ exp.position }} <span class="company">at {{ exp.company }}</span></h4>
                <p class="period">{{ exp.period }}</p>
                <p class="description">{{ exp.description }}</p>
            </div>
            <button type="button" class="btn-delete" (click)="deleteExperience(exp.id, $event)">üóëÔ∏è</button>
        </div>
        }
    </div>

    <app-delete-confirmation-modal [isOpen]="showDeleteModal()" title="Delete Experience"
        message="Are you sure you want to delete this experience? This action cannot be undone."
        (confirm)="confirmDelete()" (cancel)="closeDeleteModal()">
    </app-delete-confirmation-modal>
</div>